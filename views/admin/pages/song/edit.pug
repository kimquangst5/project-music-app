extends ../../layout/default.pug
include ../../mixins/dieu-huong.pug
include ../../mixins/them-moi.pug
include ../../mixins/khung-table.pug
include ../../mixins/option-input.pug
include ../../mixins/cap-nhat.pug

block main

	-
		let array = [
			{
				link: `/${admin}/song`,
				title: 'Danh sách bài hát'
			}
		]
	+dieu-huong("Chỉnh sửa", array)

	+cap-nhat("Cập nhật")(button-submit-form = '')

	+khung-table("Nội dung chính")
		form(
			action = `/${admin}/song/edit/${song.id}?_method=PATCH`
			class=`flex flex-col gap-y-[20px]`
			enctype="multipart/form-data"
			method="post"
		) 
			+option-input('Tên bài hát', 'title', 'yes', `fa-regular fa-music`, 'Tên bài hát', "text", song.title)
			div(class=`flex flex-col items-center gap-y-[10px] `)
				div(class="flex gap-[10px] items-center") 
					i(class='fa-regular fa-music')
					label(
						for='description'
						class=`text-[14px]`
					) Mô tả
				textarea(
					name="description"
					id = 'description'
					class=`p-[5px] rounded-[5px] border-[1px] text-[12px] bg-transparent border-text outline-none w-full`
					placeholder='Mô tả bài hát'
					textarea-mce
				) #{song.description}
			div(class=`flex flex-row items-center gap-y-[10px] grid grid-cols-4`)
				div(class="flex gap-[10px] items-center") 
					i(class='fa-regular fa-music')
					label(
						for='topicId'
						class=`text-[14px]`
					) Thể loại
				select(name="topicId" class=`p-[5px] rounded-[5px] border-[1px] text-[12px] bg-transparent border-text outline-none col-span-2`)
					option(value='' class=`bg-[#38414A] text-text`) ---Chọn thể loại---
					each it in topics
						option(
							name="topicId"
							value=it.id
							class=`bg-[#38414A] text-text`
							selected = (it.id == song.topicId ? true : false)
						) #{it.title}
			div(class=`flex flex-row items-center gap-y-[10px] grid grid-cols-4`)
				div(class="flex gap-[10px] items-center") 
					i(class='fa-regular fa-music')
					label(
						for='singerId'
						class=`text-[14px]`
					) Ca sĩ
				select(name="singerId" class=`p-[5px] rounded-[5px] border-[1px] text-[12px] bg-transparent border-text outline-none col-span-2`)
					option(value='' class=`bg-[#38414A] text-text`) ---Chọn ca sĩ---
					each it in singers
						option(name="singerId" value=it.id class=`bg-[#38414A] text-text` selected = (it.id == song.singerId ? true : false)) #{it.fullName}
			div(class=`flex flex-row items-center gap-y-[10px] grid grid-cols-4` upload-image)
				div(class="flex gap-[10px] items-center") 
					i(class='fa-regular fa-music')
					label(
						for='avatar'
						class=`text-[14px]`
					) Hình ảnh
				input(
					type='file'
					accept='image/*'
					name="avatar"
					id = 'avatar'
					class=`p-[5px] rounded-[5px] border-[1px] text-[12px] bg-transparent border-text outline-none col-span-2`
					placeholder='Ảnh bài hát'
				)
				img(src=song.avatar, alt=song.title
					class=`w-[25%] h-auto rounded-[10px] cursor-pointer`
				)
			

			div(class=`flex flex-row items-center gap-y-[10px] grid grid-cols-4` upload-audio)
				div(class="flex gap-[10px] items-center") 
					i(class='fa-regular fa-music')
					label(
						for='audio'
						class=`text-[14px]`
					) Audio
				input(
					type='file'
					accept='audio/*'
					name="audio"
					id = 'audio'
					class=`p-[5px] rounded-[5px] border-[1px] hidden text-[12px] bg-transparent border-text outline-none col-span-2`
					placeholder='Audio bài hát'
				)
				audio(controls controlsList="nodownload")
					source(src=song.audio, type="")
			
			div(class=`flex flex-row items-center gap-y-[10px] grid grid-cols-4`)
				div(class="flex gap-[10px] items-center") 
					i(class='fa-regular fa-music')
					label(
						for='lyrics'
						class=`text-[14px]`
					) Lyrics
				textarea(name="lyrics" class=`p-[5px] rounded-[5px] border-[1px] text-[12px] bg-transparent border-text outline-none col-span-2` rows='10') #{song.lyrics}

			div(class=`flex flex-row items-center gap-y-[10px] grid grid-cols-4`)
				div(class="flex gap-[10px] items-center") 
					i(class='fa-regular fa-music')
					label(
						for='status'
						class=`text-[14px]`
					) Trạng thái
				div(class=`col-span-2 flex justify-between`)
					div(class=`flex gap-[10px]`) 
						input(
							type="radio", name="status" id="active" value="active"
							checked = (song.status == 'active' ? true : false)
						)
						label(for="active") Hoạt động
					div(class=`flex gap-[10px]`) 
						input(type="radio", name="status" id="inactive" value="inactive" checked = (song.status == 'inactive' ? true : false))
						label(for="inactive") Dừng hoạt động
			
			button(type="submit" class=`hidden`) Cập nhật